<!DOCTYPE html>
<html lang="en">
<head>
    <title>Three.js Player</title>
    <meta charset="utf-8">
    <meta name="generator" content="Three.js Editor">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        /* CSS 스타일이 필요하다면 여기에 추가할 수 있습니다. */
    </style>
</head>
<body>
    <script type="module">

        import * as THREE from './js/three.module.js'; // Three.js 모듈 임포트
        import { APP } from './js/app.js'; // APP 모듈 임포트

        // Three.js와 APP 모듈을 전역 스코프에 설정
        window.THREE = THREE;

        // Three.js Player 인스턴스 생성
        var player = new APP.Player();

        // Player DOM 요소를 body에 추가
        document.body.appendChild(player.dom);

        // 윈도우 크기 변경 시 실행되는 함수
        function checkWindowSize() {
            var width = window.innerWidth;
            if (width >= 0) {
                // 윈도우 크기가 900px 이하인 경우
                var loader = new THREE.FileLoader(); // 파일 로더 생성
                loader.load('app.json', function (text) {
                    // app.json 파일을 로드하고 Player에 로드
                    player.load(JSON.parse(text));
                    player.setSize(width, window.innerHeight); // Player 크기 설정
                    player.play(); // Player 실행
                });
            } else {
                // 윈도우 크기가 900px 초과인 경우
                player.stop(); // Player 중지
                player.dom.style.display = 'none'; // Player 숨김
            }
        }

        // 초기 로드 시와 윈도우 크기 변경 시 checkWindowSize 함수 호출
        checkWindowSize();
        window.addEventListener('resize', checkWindowSize);

        // 초기 로드 시에도 checkWindowSize 함수 호출
        document.addEventListener('DOMContentLoaded', checkWindowSize);

    </script>
</body>
</html>
